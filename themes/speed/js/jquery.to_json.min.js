!function(e){e.fn.toJSON=function(t){t=e.extend({},t);var i=this,a={},n={},u={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,i){return e[t]=i,e},this.push_counter=function(e,t){return void 0===n[e]&&(n[e]=0),void 0===t?n[e]++:void 0!==t&&t>n[e]?n[e]=++t:void 0},e.each(e(this).serializeArray(),function(){if(u.validate.test(this.name)){for(var t,n=this.name.match(u.key),d=this.value,h=this.name;void 0!==(t=n.pop());)h=h.replace(new RegExp("\\["+t+"\\]$"),""),t.match(u.push)?d=i.build([],i.push_counter(h),d):t.match(u.fixed)?(i.push_counter(h,t),d=i.build([],t,d)):t.match(u.named)&&(d=i.build({},t,d));a=e.extend(!0,a,d)}}),a}}(jQuery);